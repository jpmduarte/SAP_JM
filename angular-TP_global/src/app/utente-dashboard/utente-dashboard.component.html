<header class="header">
    <div class="user-info">
        <span class="user-id">Número do Utente</span>
    </div>
    <div class="profile" (click)="toggleLogoutPopup()">
        <i class="material-icons">person</i>
        <div *ngIf="showLogoutPopup" class="logout-popup">
            <button (click)="logout()">Logout</button>
        </div>
    </div>
</header>
<div *ngIf="show">
    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>Nº Processo</th>
                    <th>Nome</th>
                    <th>Estado</th>
                    <th>Detalhes</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1001</td>
                    <td>ABC</td>
                    <td>Rejeitado</td>
                    <td>Consultar motivo</td>
                </tr>
                <tr>
                    <td>1002</td>
                    <td>ABC</td>
                    <td>Aprovado</td>
                    <td>Consultar data da avaliação</td>
                </tr>
                <tr>
                    <td>1003</td>
                    <td>ABC</td>
                    <td>Em análise</td>
                    <td>Editar dados</td>
                </tr>
                <!-- <tr *ngFor="let pedido of pedidos">
                    <td>{{ pedido.id }}</td>
                    <td>{{ pedido.utente.name }}</td>
                    <td>{{ pedido.estado }}</td>
                    <td>{{ pedido.detalhes }}</td>
                </tr> -->
            </tbody>
        </table>
    </div>
    <button class="button-container" (click)="toggleFormPopup()">Efetuar Novo Pedido</button>
</div>
<div *ngIf="showFormPopup">
    <div>
        <form *ngIf="showFormPopup" class="form-container">
            <h2>Preencha os campos abaixo para efetuar o seu Pedido de Junta Médica</h2>

            <!-- Box de Informações Pessoais -->
            <div class="box box-info">
                <div class="flex-row">
                    <div class="form-group">
                        <label for="nomeCompleto">Nome Completo:</label>
                        <input type="text" id="nomeCompleto" name="nomeCompleto">
                    </div>
                </div>
                <div class="flex-row">
                    <div class="form-group">
                        <div class="form-group">
                            <label for="dataNascimento">Data de Nascimento:</label>
                            <input type="date" id="dataNascimento" name="dataNascimento">
                        </div>
                    </div>
                </div>
                <div class="flex-row">
                    <div class="form-group">
                        <label for="nacionalidade">Nacionalidade:</label>
                        <input type="text" id="nacionalidade" name="nacionalidade">
                    </div>
                    <div class="form-group">
                        <label for="naturalidade">Naturalidade:</label>
                        <input type="text" id="naturalidade" name="naturalidade">
                    </div>
                </div>
            </div>
            <!-- Box de Informações Morada -->
            <h3>Morada</h3>
            <div class="box box-morada">
                <div class="flex-row">
                    <div class="form-group full-width">
                        <label for="morada">Rua:</label>
                        <input type="text" id="morada" name="morada">
                    </div>
                </div>
                <div class="flex-row">
                    <div class="form-group">
                        <label for="cp">Código Postal:</label>
                        <input type="text" id="codigoPostal" name="codigoPostal">
                    </div>
                    <div class="form-group">
                        <label for="localidade">Localidade:</label>
                        <input type="text" id="localidade" name="localidade">
                    </div>
                </div>
                <div class="flex-row">
                    <div class="form-group">
                        <label for="concelho">Concelho:</label>
                        <input type="text" id="concelho" name="concelho">
                    </div>
                    <div class="form-group">
                        <label for="distrito">Distrito:</label>
                        <input type="text" id="distrito" name="distrito">
                    </div>
                </div>
            </div>
            <!-- Box de Informações Contacto -->
            <h3>Contacto</h3>
            <div class="box box-contacto">
                <div class="flex-row">
                    <div class="form-group">
                        <label for="telemovel">Telemóvel:</label>
                        <input type="text" id="telemovel" name="telemovel">
                    </div>
                    <div class="form-group">
                        <label for="email">E-mail:</label>
                        <input type="text" id="email" name="email">
                    </div>
                </div>
            </div>
            <!-- Box de Informações Documento -->
            <div class="box box-documento">
                <div class="flex-row">
                    <div class="form-group">
                        <label for="nIdentificacao">Nº de Identificacao:</label>
                        <input type="text" id="nIdentificacao" name="nIdentificacao">
                    </div>
                    <div class="form-group">
                        <label for="nUtente">Nº Utente de Saúde:</label>
                        <input type="text" id="nUtente" name="nUtente">
                    </div>
                </div>
                <div class="flex-row">
                    <div class="form-group">
                        <label for="NIF">NIF:</label>
                        <input type="text" id="NIF" name="NIF">
                    </div>
                    <div class="form-group">
                        <label for="validade">Data de Validade:</label>
                        <input type="date" id="validade" name="validade">
                    </div>
                </div>
            </div>
            <!-- Box de Anexo Documentos -->
            <h3>Anexar Documentação</h3>
            <div class="box box-anexo">
                <div class="flex-row">
                    <div class="form-group">
                        <label for="registosClinicos">Adicionar documentos:</label>
                        <input type="file" id="registosClinicos" name="registosClinicos" accept=".pdf" (change)="onFileChange($event)" multiple>
                    </div>
                    <div>
                        <div *ngFor="let file of files" class="document-item">
                            <span (click)="openFile(file)">{{ file.name }}</span>
                            <span (click)="removeFile(file)">&times;</span>
                        </div>
                        <br><br>
                    </div>
                </div>
            </div>
            <!-- Box de Opção -->
            <div class="box box-opcao">
                <div class="flex-row">
                    <div class="form-group">
                        <div>
                            <input type="radio" id="submissaoReavaliacaoSim" name="submissionStatus" value="sim" (change)="onSubmissionStatusChange('sim')"><label for="submissaoReavaliacaoSim">Já foi submetido, pretendo uma reavaliação</label>
                        </div>
                        <div>
                            <input type="radio" id="nuncaSubmetido" name="submissionStatus" value="nao" (change)="onSubmissionStatusChange('nao')"><label for="nuncaSubmetido">Nunca foi submetido a Junta Médica de avaliação do grau de incapacidade</label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group" *ngIf="showPreviousAssessmentField">
                <label for="atestadoAnterior">Adicionar Atestado Anterior:</label>
                <input type="file" id="atestadoAnterior" name="atestadoAnterior" accept=".pdf">
            </div>
            <button>Submeter</button>
        </form>
    </div>
</div>

<footer class="footer"></footer>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
